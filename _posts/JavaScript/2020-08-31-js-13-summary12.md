---
title: "[JS] Javascript #12 Summary"
excerpt: 
last_modified_at: 2020-08-31

categories:
  - JavaScript

tags:
  - javascript
  - asynchronous
  - async
  - await
  - promise

---

# Javascript \#12 Summary

> - [ë“œë¦¼ì½”ë”© by ì—˜ë¦¬](https://www.youtube.com/channel/UC_4u-bXaba7yrRz_6x6kb_w): [ìë°”ìŠ¤í¬ë¦½íŠ¸ 13. ë¹„ë™ê¸°ì˜ ê½ƒ JavaScript async ì™€ await ê·¸ë¦¬ê³  ìœ ìš©í•œ Promise APIs | í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ì…ë¬¸í¸ (JavaScript ES6)](https://www.youtube.com/watch?v=aoQSOZfz3vQ&list=PLv2d7VI9OotTVOL4QmPfvJWPJvkmv6h-2&index=13)  
> <br><br>**Caution**<br><br>
> ê°•ì˜ë¥¼ ë“£ê³  ì œê°€ ê¸°ì–µí•˜ê¸° ì‰½ê²Œ ê¸°ë¡í•˜ì—¬ ë³€í˜•ëœ ë‚´ìš©ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
> ì˜¤ë¥˜ê°€ ìˆê±°ë‚˜ í•´ë‹¹ ê¸€ì— ë¬¸ì œê°€ ìˆì„ ê²½ìš° í”¼ë“œë°± ë¶€íƒë“œë¦½ë‹ˆë‹¤.

<br>

- promise chaning \-\-\> ê°€ë…ì„± ë–¨ì–´ì§

- ê¸°ì¡´ì˜ ì¡´ì¬í•˜ëŠ” ê²ƒì„ ê°ì‹¸ì„œ ê°„í¸í•˜ê²Œ ì“¸ ìˆ˜ ìˆëŠ” API: syntatic sugar  
(ex. class, async)

<br>

## async & await

- clear style of using promise

<br>

### async

#### promise example

**status: pending**  

```javascript
function fetchUser() {
    return new Promise((resolve, reject) => {
        // do network request in 10 secs...
        return 'bruce';
    });
}

const user = fetchUser();
console.log(user);
// PromiseÂ {<pending>}__proto__: Promise [[PromiseStatus]]: "pending" [[PromiseValue]]: undefined
```

- `resolve`, `reject` ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— status ê°€ pending

<br>

**status: fulfilled**  

```javascript
function fetchUser() {
    return new Promise((resolve, reject) => {
        // do network request in 10 secs...
        resolve('bruce');
    });
}

const user = fetchUser();
console.log(user);
// // Promise {<fulfilled>: "bruce"}__proto__: Promise [[PromiseStatus]]: "fulfilled" [[PromiseValue]]: "bruce"
```

<br><br>

#### async example

```javascript
async function fetchUser() {
    // do network request in 10 secs...
    return 'bruce';
}

const user = fetchUser();
user.then(console.log);  // bruce (ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì¸í•´ ë§ˆì§€ë§‰ìœ¼ë¡œ ì¶œë ¥ëœë‹¤.)
console.log(user);
// Promise {<fulfilled>: "bruce"}__proto__: Promise [[PromiseStatus]]: "fulfilled" [[PromiseValue]]: "bruce"
```
`async` ê°€ ë¶™ì€ function ì€ promise ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

<br><br>

### async with await

- `await` ëŠ” `async` ê°€ ë¶™ì€ function ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥

```javascript
function delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function getApple() {
    await delay(2000);
    return 'ğŸ';
}

async function getBanana() {
    await delay(1000);
    return 'ğŸŒ';
}
```

- `getBanana()` ë¥¼ promise ë¡œ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```javascript
function getBanana() {
    return delay(1000)
    .then(() => 'ğŸŒ');
}
```

<br>

- **promise chaning**

```javascript
function pickFruits() {
    return getApple()
    .then(apple => {
        return getBanana()
        .then(banana => `${apple} + ${banana}`);
    });
}

pickFruits().then(console.log);
```
\>\>\> `ğŸ + ğŸŒ`  

<br>

- **async with await**

```javascript
async function pickFruits() {
    const apple = await getApple();
    const banana = await getBanana();
    return `${apple} + ${banana}`;
}

pickFruits().then(console.log);
```
\>\>\> `ğŸ + ğŸŒ`  

ìœ„ ì½”ë“œì˜ ë¬¸ì œì ì€ `getApple()`, `getBanana()` ê°ê° 1ì´ˆì”© ê±¸ë ¤ ë…ë¦½ì ì¸ ì½”ë“œì„ì—ë„ **ë³‘ë ¬ì²˜ë¦¬ê°€ ì•ˆëœë‹¤**.

<br>

- **promise ë¥¼ í™œìš©í•œ ë³‘ë ¬ì²˜ë¦¬**

```javascript
async function pickFruits() {
    // promise ë¥¼ í†µí•´ ë³‘ë ¬ì²˜ë¦¬
    const applePromise = getApple();
    const bananaPromise = getBanana();

    // ë™ê¸°í™”
    const apple = await applePromise;
    const banana = await bananaPromise;
    return `${apple} + ${banana}`;
}

pickAllFruits().then(console.log);
```
\>\>\> `ğŸ + ğŸŒ`  

ìœ„ ì½”ë“œëŠ” clean í•˜ì§€ ëª»í•˜ë‹¤.  

<br>

- **promise ì˜ API (`Promise.all`)ë¥¼ í™œìš©í•œ ë³‘ë ¬ì²˜ë¦¬**

```javascript
function pickAllFruits() {
    return Promise.all([getApple(), getBanana()])
    .then(fruits => fruits.join(' + '));
}
pickAllFruits().then(console.log);
```
\>\>\> `ğŸ + ğŸŒ`  

<br>

- **`Promise.race`**: ë¨¼ì € ì™„ë£Œëœ promise ê°ì²´ í•œê°œë§Œ ë°˜í™˜

```javascript
function pickOnlyOne() {
    return Promise.race([getApple(), getBanana()]);
}

pickOnlyOne().then(console.log);
```
\>\>\> `ğŸŒ`  
